<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>State of Oskari 8/2019</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/black.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css" />
<style>
</style>
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
            <img  src="images/oskari_k.svg" style="width: 70%; border:0; background-color:transparent; " />
          <h2>Year in review 8/2019</h2>
          <p>Sami MÃ¤kinen - NLS Finland</p>
        </section>
        <section data-markdown>
          ### Oskari
          - Software library/framework/geoportal
          - Server: Java built with Maven
          - Frontend: JS built with Webpack
          - Requires:
            - PostgreSQL/PostGIS
            - Redis
            - (Spatial Data Infrastructure)
        </section>
        <section>
            <h4>Arctic-SDI geoportal</h4>
            <img  src="images/asdi.png" style="max-width: 80%; border:0;" />
        </section>
        <section>
            <h4>National geoportal Finland</h4>
            <img  src="images/pti.png" style="max-width: 80%; border:0;" />
        </section>
        <section data-markdown>
          ### Repository arrangements

          - oskari-server
            - (oskari-server-extension-template)
            - sample-server-extension
          - oskari-frontend
            - sample-application
        </section>
        <section>
          <h4>Frontend builds</h4>
          
          <p class="fragment shrink fade-out"><img src="images/grunt-logo.svg" style="max-width: 20%; border:0; background-color:transparent" /> </p>
          <p class="fragment grow fade-in current-visible"><img src="images/webpack-logo.svg"  style="max-width: 50%; border:0; background-color:transparent"/> </p>
           
        </section>
        <section data-markdown>
          #### Frontend builds
          
          - Babel
          - ES6 modules
          - imports
          - dynamic imports
          - npm dependencies
          - React support
        </section>
        <section data-markdown>
          #### Imports: bundles
          Then/now:
          ```json
          "scripts": [{
            "type": "text/javascript",
            "src": ".../mapping/drawtools/instance.js"
          }, {
            "type": "text/css",
            "src": ".../mapping/drawtools/resources/css/style.css"
          }, { ... }]
          ```
          Now/future:
          ```Javascript
          import { DrawTools } from './instance';
          import './resources/css/style.css';
          ```
        </section>
        <section data-markdown>
          #### Imports: applications
          Then (minifierAppSetup.json):
          ```json
          {
            "bundlename" : "drawtools",
            "metadata" : {
              "Import-Bundle" : {
                "drawtools" : {
                  "bundlePath" : ".../mapping/ol3/"
                }
              }
            }
          }
          ```
          Now (main.js):
          ```Javascript
          import 'oskari-loader!oskari-frontend/.../drawtools/bundle.js';
          ```
        </section>
        <section data-markdown>
          ### New goodies: React

          - keeping it small and simple
          - named imports
          - use props as much as possible
          - state kept at bundle instance
          - "mutator" objects from services
        </section>
        <section data-markdown>
          ### First steps in React

          - language selector
          - thematic maps legend
          - map layer admin
        </section>
        <section data-markdown>
          ### New goodies for UI

          - Ant Design
            - "The world's second most popular React UI framework"
          - styled-components
          - Challenge: multiple styling libs / style conficts
        </section>
        <section data-markdown>
            ### New goodies

            - Storybook
            - Jest
         </section>
        <section data-markdown>
          ### Pull requests
          - Travis CI
          - ESLint
          - Jest
          - Junit
          - Oracle JDK 11, OpenJDK 8 & 11
        </section>
        <section data-markdown>
          ### WFS integrations

          - Complete rewrite
          - MVT / GeoJSON
          - WFS 3 supports
          - Complex features
        </section>
        <section>
            <h3>Slow services...</h3>
            <ul>
              <li class="fragment">Hystrix</li>
              <li class="fragment">Service Worker<br />
                <img  src="images/slow.gif" style="max-width: 100%; border:0;" />
              </li>
            </ul>
        </section>
        <section data-markdown>
          ### Vector features

          - https://oskari.org/documentation/examples/oskari-style
          - Mapbox styles for MVT
          - Clustering
          - Color animations
          - Hover
          - Performance improvements
        </section>
        <section data-markdown>
        #### Thematic maps

        - Time series
        - Diagram
        - UN stats Sustainable Development Goals
        - Improvements:
            - Manual classification
            - Filter out data without labels
            - Localization options added
            - Region sets order/res files

        - Presentation at [Timon esitys]
        </section>
        <section data-markdown>
          ### Server stuff

          - Jetty/CometD upgrade (1.49 / 1.50)
          - CSRF protection -> cookie -> SameSite
          - Enabled async controllers
          - Frontend paths removed from AppSetups
          - Appsetup specific publish template
        </section>
        <section data-markdown>
          ### Printout
          - Complete rewrite
          - True vector layers
          - Logo on PDF customizable
        </section>
        <section data-markdown>
          ### Search
          - OSM channel supports bbox filter to limit results 
          - Validation error handling improved
          - Removed NLS search channels
        </section>
        <section data-markdown>
          ### Documentation / DX

          - API doc improvements
          - SchemaSpy: oskari.org/db
          - Toolbar button logic rewrite https://github.com/oskariorg/oskari-frontend/pull/754
          - classpath conflicts with libraries fixed
          - setup app improved (disabled modules are no longer populated, SRS populated properly and bounds set)
          - inital support for in-memory test database setup (https://github.com/oskariorg/oskari-server/pull/403)
          - migrations error handling (app won't start in partially successful migrations between versions)
          - classpath conflicts with libraries fixed
          - Library updates
          - fi.nls.oskari.* -> org.oskari.* packages

  


        </section>
        <section data-markdown>
        #### Other
        - Bing maps
        - 3D
        - French & Russian localizations
        - User location (path, accuracy, error handling, map extent)
        - Improvements to drawtools.
        - Performance improvements
        - Session timeout notification improvements
        - improvements to end-user registration
        - layer proxy improvements
        - KML parsing improved
        - CSW parsing improved
        - More things saved in state like map rotation
        
        </section>
        <section data-markdown>
        ### other
        - concept of internal layers
        - login redirects to referer instead of geoportal (enables login on embedded maps/views)

        - support vector tile based layers
        - skip intro & map rotation params on urls
        - fixes to analysis functionality
    </section>
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        history: true,
        dependencies: [
          { src: "plugin/markdown/marked.js" },
          { src: "plugin/markdown/markdown.js" },
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true }
        ]
      });
    </script>
  </body>
</html>
        </section>
