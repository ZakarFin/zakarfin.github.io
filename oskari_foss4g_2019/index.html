<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>State of Oskari 8/2019</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/black.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css" />
<style>
</style>
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
            <img  src="images/oskari_k.svg" style="width: 70%; border:0; background-color:transparent; " />
          <h2>Year in review 8/2019</h2>
          <p>Sami MÃ¤kinen - NLS Finland</p>
        </section>
        <section data-markdown>
          ### Oskari
          - Library/framework/geoportal/tool
          - Server: Java built with Maven
          - Frontend: JS built with Webpack
          - Requires:
            - PostgreSQL/PostGIS
            - Redis
            - (Spatial Data Infrastructure)
        </section>
        <section>
            <h4>Arctic-SDI geoportal</h4>
            <img  src="images/asdi.png" style="max-width: 80%; border:0;" />
        </section>
        <section>
            <h4>National geoportal Finland</h4>
            <img  src="images/pti.png" style="max-width: 80%; border:0;" />
        </section>
        <section data-markdown>
          ### Repository arrangements

          - oskari-server
            - (oskari-server-extension-template)
            - sample-server-extension
          - oskari-frontend
            - oskari-frontend-contrib
            - sample-application
        </section>
        <section>
          <h4>Frontend builds</h4>
          
          <p class="fragment shrink fade-out"><img src="images/grunt-logo.svg" style="max-width: 20%; border:0; background-color:transparent" /> </p>
          <p class="fragment grow fade-in current-visible"><img src="images/webpack-logo.svg"  style="max-width: 50%; border:0; background-color:transparent"/> </p>
           
        </section>
        <section data-markdown>
          #### Frontend builds
          
          - Babel
          - ES6 modules
          - imports
          - dynamic imports
          - npm dependencies
          - React support
        </section>
        <section data-markdown>
          #### Imports: bundles
          Then/now:
          ```json
          "scripts": [{
            "type": "text/javascript",
            "src": ".../mapping/drawtools/instance.js"
          }, {
            "type": "text/css",
            "src": ".../mapping/drawtools/resources/css/style.css"
          }, { ... }]
          ```
          Now/future:
          ```Javascript
          import { DrawTools } from './instance';
          import './resources/css/style.css';
          ```
        </section>
        <section data-markdown>
          #### Imports: applications
          Then (minifierAppSetup.json):
          ```json
          {
            "bundlename" : "drawtools",
            "metadata" : {
              "Import-Bundle" : {
                "drawtools" : {
                  "bundlePath" : ".../mapping/ol/"
                }
              }
            }
          }
          ```
          Now (main.js):
          ```Javascript
          import 'oskari-loader!oskari-frontend/.../drawtools/bundle.js';
          ```
        </section>
        <section data-markdown>
          ### New goodies: React

          - Small and simple
          - Named imports
          - Use props as much as possible
          - State kept at bundle instance
          - "Mutator" objects from services
        </section>
        <section data-markdown>
          ### First steps in React

          - Language selector
          - Thematic maps (legend)
          - Map layer listing / admin
        </section>
        <section data-markdown>
          ### New goodies for UI

          - Ant Design
            - "The world's second most popular React UI framework"
          - Styled-components
          - Challenge: multiple styling libs / style conficts
        </section>
        <section data-markdown>
            ### New goodies

            - Storybook
            - Jest
         </section>
        <section data-markdown>
          ### Pull requests
          - Travis CI
          - ESLint
          - Jest
          - Junit
          - Oracle JDK 11, OpenJDK 8 & 11
        </section>
        <section data-markdown>
          ### WFS integrations

          - Complete rewrite
          - MVT / GeoJSON
          - WFS 3 supports
          - Complex features
        </section>
        <section>
            <h3>Slow services...</h3>
            <ul>
              <li class="fragment">Hystrix</li>
              <li class="fragment">Service Worker<br />
                <img  src="images/slow.gif" style="max-width: 100%; border:0;" />
              </li>
            </ul>
        </section>
        <section data-markdown>
          ### Vector features

          - https://oskari.org/documentation/examples/oskari-style
          - Mapbox styles for MVT
          - Clustering
          - Color animations
          - Hover
          - Performance improvements
        </section>
        <section data-markdown>
        #### Thematic maps

        - Time series & diagram
        - UN stats Sustainable Development Goals
        - Improvements:
            - Manual classification
            - Filter out invalid data
            - Localization options added
            - Region sets order/res files

        - Thematic Mapping with Oskari at 15.00 (Opera)
        </section>
        <section data-markdown>
          ### Server stuff

          - Jetty/CometD upgrade (1.49 / 1.50)
          - CSRF protection
          - Enabled async controllers
          - Frontend paths removed from AppSetups
          - Appsetup specific publish template
        </section>
        <section data-markdown>
          ### Printout
          - Complete rewrite
          - True vector features
          - Logo on PDF customizable
        </section>
        <section data-markdown>
          ### Search
          - Removed NLS search channels
          - Validation & error handling improved
          - OSM channel supports bbox filter to limit results 
        </section>
        <section data-markdown>
          ### Documentation / DX

          - API doc improvements / SchemaSpy: oskari.org/db
          - Toolbar button logic rewrite
          - Migrations error handling
          - Setup app improved
          - Inital support for in-memory test database setup
          - Library updates
          - fi.nls.oskari.* -> org.oskari.* packages
          - Classpath conflicts with libraries fixed

        </section>
        <section data-markdown>
        #### Other

        - Bing maps
        - 3D
        - French & Russian localizations
        - User location (path, accuracy, error handling, map extent)
      </section>
        <section data-markdown>
        #### Other improvements

        - End-user registration
        - Layer proxy
        - KML & CSW parsing
        - drawtools
        - Session timeout notification
        - Performance 
        - More things saved in state like map rotation
        </section>
        <section data-markdown>
        ### Other stuff
        - Support vector tile based layers
        - Internal layers
        - Login redirects to referer instead of geoportal "root"
        - Skip intro & map rotation params on urls
        - Fixes to analysis functionality
    </section>
    <section data-markdown>
    # Thank you!
    - https://oskari.org
    - https://github.com/oskariorg
    - Oskari-user@lists.osgeo.org
    - https://gitter.im/oskariorg/chat
</section>
<section>
  <img  src="images/inspire.png" style="width: 100%; border:0; background-color:transparent; " />
</section>
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        history: true,
        dependencies: [
          { src: "plugin/markdown/marked.js" },
          { src: "plugin/markdown/markdown.js" },
          { src: "plugin/notes/notes.js", async: true },
          { src: "plugin/highlight/highlight.js", async: true }
        ]
      });
    </script>
  </body>
</html>
        </section>
